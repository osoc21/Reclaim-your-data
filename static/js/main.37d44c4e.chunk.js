(this.webpackJsonpreclaim_your_data=this.webpackJsonpreclaim_your_data||[]).push([[0],{135:function(e,t,n){},136:function(e,t,n){},138:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(11),s=n.n(a),i=(n(135),n(12)),o=n(8),l=(n(136),n(1)),u=n.n(l),j=n(3),p=(n(138),/https:\/\/(\w+\.)solidweb.org\/|https:\/\/pod\.inrupt\.com\/\w+\//);function b(e){return e.match(p)[0]}var f=n(227),d=n(34),h=n(5);var x=function(e){var t=e.setLoggedIn,n=e.setWebId,r=e.setPodUrl,c=null;function a(){return(a=Object(j.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.handleIncomingRedirect)();case 2:if(!(c=Object(d.getDefaultSession)()).info.isLoggedIn){e.next=10;break}return t(!0),e.next=7,n(c.info.webId);case 7:return a=b(c.info.webId),e.next=10,r(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),Object(h.jsx)("div",{className:"login-frame",children:Object(h.jsx)(f.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return Object(d.login)({oidcIssuer:"https://broker.pod.inrupt.com",redirectUrl:window.location.href,clientName:"Getting started app"})},children:"Log-in"})})},O=n(33),g=(n(182),n(44)),m=n(230),v=(n(231),n(232));n(120),n(121),n(183);var y=function(e){var t=e.files,n=(e.openFolder,e.setLoadingAnim,Object(r.useState)([])),c=Object(o.a)(n,2),a=c[0],s=c[1];function i(e){return e.endsWith("/")}function l(e){return e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".png")}function p(e){var t=e.match(/^https:\/\/pod\.inrupt\.com(\/\w+)*\/(\w+)/);return t[t.length-1]}function b(){return(b=Object(j.a)(u.a.mark((function e(t){var n,r,c,a,o,j,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(O.a)(t),e.prev=2,r.s();case 4:if((c=r.n()).done){e.next=16;break}if(a=c.value,o={url:a.url,shortName:p(a.url),isFolder:i(a.url),imageUrl:null},n.push(o),!l(o.url)){e.next=14;break}return e.next=11,Object(g.a)(o.url,{fetch:d.fetch});case 11:j=e.sent,b=URL.createObjectURL(j),o.imageUrl=b;case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:s(n);case 25:case"end":return e.stop()}}),e,null,[[2,18,21,24]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(e){b.apply(this,arguments)}(t)}),[t]),Object(h.jsx)("div",{className:"grid-view",children:Object(h.jsx)(v.a,{rowHeight:160,cols:3,children:a.map((function(e,t){return function(e,t){return!e.isFolder&&e.imageUrl?Object(h.jsx)(m.a,{children:Object(h.jsx)("img",{src:e.imageUrl,alt:e.imageUrl})}):null}(e)}))})})},w=n(234),k=n(233);var S=function(e){var t=e.podUrl,n=Object(r.useState)([]),c=Object(o.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!0),l=Object(o.a)(i,2),p=l[0],b=l[1],f=(e.explorerPath,e.setExplorerPath);function x(e){console.log("open folder ..."),b(!0),O(e).then((function(t){f(e),s(t),b(!1)}))}function O(e){return m.apply(this,arguments)}function m(){return(m=Object(j.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("url:",t),e.next=3,Object(g.b)(t,{fetch:d.fetch});case 3:return n=e.sent,e.next=6,Object(g.c)(n);case 6:return r=e.sent,c=[],r.length>1&&(c=r.slice(1,r.length)),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){""!==t&&O(t).then((function(e){f(t),s(e),b(!1)}))}),[t]),Object(h.jsxs)(w.a,{id:"file-explorer",children:[function(){if(p)return Object(h.jsx)(k.a,{size:100,style:{zIndex:1600,position:"fixed",right:"40vw",bottom:"50vh",color:"#1a90ff"}})}(),Object(h.jsx)(y,{files:a,openFolder:x,setLoadingAnim:b})]})};var U=function(e){var t=e.explorerPath,n=Object(r.useState)([]),c=Object(o.a)(n,2),a=c[0],s=c[1],i=e.setNotifMsg,l=e.setNotifType;function p(){return(p=Object(j.a)(u.a.mark((function e(){var n,r,c,s,o,j,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],console.log("uploading ..."),r=Object(O.a)(a);try{for(r.s();!(c=r.n()).done;)s=c.value,n.push(b(s,t))}catch(u){r.e(u)}finally{r.f()}return e.next=6,Promise.all(n);case 6:for(o=e.sent,j="",p=0;p<o.length;++p)o[p]||(j+="Could not upload '"+a[p].name+"', the file might already exist.\n");if(""===j){e.next=16;break}return e.next=12,l("error");case 12:return e.next=14,i(j);case 14:e.next=20;break;case 16:return e.next=18,l("success");case 18:return e.next=20,i("Files successfully uploaded !!");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return f.apply(this,arguments)}function f(){return(f=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.d)(n,t,{slug:t.name,contentType:t.type,fetch:d.fetch});case 3:return e.sent,e.abrupt("return",t.name);case 7:e.prev=7,e.t0=e.catch(0),console.error("ERROR CAUGHT:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function x(){var e,t=[],n=Object(O.a)(a);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(Object(h.jsx)("li",{children:r.name}))}}catch(c){n.e(c)}finally{n.f()}return t}return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Upload files"}),Object(h.jsxs)("p",{children:["Current path: ",t]}),Object(h.jsx)("button",{className:"Button",onClick:function(){document.querySelector("#file-input").click()},children:"Add file(s)"}),Object(h.jsxs)("div",{className:"SelectedFilesDiv",children:[Object(h.jsx)("p",{children:"Selected files:"}),Object(h.jsx)("ul",{children:x()})]}),Object(h.jsx)("button",{className:"Button",onClick:function(){return p.apply(this,arguments)},children:"Upload"}),Object(h.jsx)("input",{id:"file-input",type:"file",multiple:"multiple",name:"fileUploadInput",className:"file-selection",onChange:function(e){s(e.target.files)}})]})},N=n(236),P=n(237),I=n(235),C=n(239),L=n(240),E=(n(242),n(243),n(245),n(92)),F=n.n(E),B=n(238),R=n(123),T=n.n(R),W=n(122),z=n.n(W),A=n(244),M=n(241),_=n(124),D=n.n(_),G=n(17),H=Object(I.a)({fab:{position:"fixed",right:"10px",bottom:"10px"},topBarRightElem:{marginLeft:"auto"},appBar:{background:"linear-gradient(to right, #0f0c29, #302b63, #24243e)"}});function J(e){var t=e.history,n=e.classes;return Object(h.jsx)(N.a,{position:"static",className:n.appBar,children:Object(h.jsx)(P.a,{children:Object(h.jsx)(B.a,{style:{color:"white"},className:n.topBarRightElem,edge:"start","aria-label":"menu",onClick:function(){console.log("goto file upload screen ..."),t.push("/upload")},children:Object(h.jsx)(F.a,{})})})})}function q(e){var t=e.classes;return Object(h.jsxs)(C.a,{className:t.appBar,showLabels:!0,style:Object(i.a)({position:"fixed",bottom:0,width:"300px",borderRadius:"10px"},"bottom","10px"),children:[Object(h.jsx)(L.a,{style:{color:"white"},label:"Photos",icon:Object(h.jsx)(z.a,{})}),Object(h.jsx)(L.a,{style:{color:"white"},label:"Albums",icon:Object(h.jsx)(T.a,{})})]})}function K(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],j=(e.webId,e.podUrl),p=e.explorerPath,b=e.setExplorerPath,f=e.history,d=e.classes,x=Object(r.useState)(null),O=Object(o.a)(x,2);O[0],O[1];function g(e){var t=e.notifMsg,n=e.notifType;return Object(h.jsx)(M.a,{in:""!==t,children:Object(h.jsx)(A.a,{severity:n,action:Object(h.jsx)(B.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){a("")},children:Object(h.jsx)(D.a,{fontSize:"inherit"})}),children:t},"2")})}return[Object(h.jsx)(J,{classes:d,history:f},"1"),Object(h.jsx)(g,{notifMsg:c,notifType:l}),Object(h.jsx)("div",{className:"content",children:Object(h.jsxs)(G.c,{children:[Object(h.jsx)(G.a,{exact:!0,path:"/upload",children:Object(h.jsx)(U,{explorerPath:p,setNotifMsg:a,setNotifType:u})}),Object(h.jsx)(G.a,{exact:!0,path:"/",children:Object(h.jsx)(S,{podUrl:j,explorerPath:p,setExplorerPath:b})})]})},"3"),Object(h.jsx)(q,{classes:d},"4")]}var Q=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(o.a)(a,2),i=s[0],l=s[1],u=Object(r.useState)(""),j=Object(o.a)(u,2),p=j[0],b=j[1],f=Object(r.useState)(""),d=Object(o.a)(f,2),O=d[0],g=d[1],m=Object(G.f)(),v=H();return Object(r.useEffect)((function(){g(p)}),[p]),Object(h.jsx)("div",{className:"app-div",children:""!==i&&n?Object(h.jsx)(K,{classes:v,webId:i,podUrl:p,history:m,explorerPath:O,setExplorerPath:g}):Object(h.jsx)(x,{setWebId:l,setLoggedIn:c,setPodUrl:b})})},V=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,271)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},X=n(88);s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(X.a,{children:Object(h.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[197,1,2]]]);
//# sourceMappingURL=main.37d44c4e.chunk.js.map