(this.webpackJsonpreclaim_your_data=this.webpackJsonpreclaim_your_data||[]).push([[0],{128:function(e,t,n){},129:function(e,t,n){},131:function(e,t,n){},175:function(e,t,n){},186:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(27),s=n.n(a),i=(n(128),n(6)),o=(n(129),n(1)),l=n.n(o),u=n(4),j=(n(131),/https:\/\/(\w+\.)solidweb.org\/|https:\/\/pod\.inrupt\.com\/\w+\//);function b(e){return e.match(j)[0]}var p=n(212),f=n(25),d=n(3);var h=function(e){var t=e.setLoggedIn,n=e.setWebId,c=e.setPodUrl,r=null;function a(){return(a=Object(u.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.handleIncomingRedirect)();case 2:if(!(r=Object(f.getDefaultSession)()).info.isLoggedIn){e.next=11;break}return e.next=6,t(!0);case 6:return e.next=8,n(r.info.webId);case 8:return a=b(r.info.webId),e.next=11,c(a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),Object(d.jsx)("div",{className:"login-frame",children:Object(d.jsx)(p.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return Object(f.login)({oidcIssuer:"https://broker.pod.inrupt.com",redirectUrl:window.location.href,clientName:"Getting started app"})},children:"Log-in"})})},x=n(30),O=n(32),m=n(214),g=n(215),v=n(107),y=n.n(v),w=(n(175),n(108)),k=n.n(w);var N=function(e){var t=e.files,n=(e.openFolder,e.setLoadingAnim,Object(c.useState)([])),r=Object(i.a)(n,2),a=r[0],s=r[1],o=e.currentPath;function j(e){return e.endsWith("/")}function b(e){return e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".png")}function p(e){var t=e.match(/^https:\/\/pod\.inrupt\.com(\/\w+)*\/(\w+)/);return t[t.length-1]}function h(e){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(l.a.mark((function e(t){var n,c,r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],c=Object(x.a)(t);try{for(c.s();!(r=c.n()).done;)a=r.value,i={url:a.url,shortName:p(a.url),isFolder:j(a.url),imageUrl:null,date:null},n.push(i)}catch(o){c.e(o)}finally{c.f()}return e.next=5,w(n);case 5:return e.next=7,s(n);case 7:S(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(l.a.mark((function e(t){var n,c,r,a,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(x.a)(t),e.prev=1,n.s();case 3:if((c=n.n()).done){e.next=17;break}if(!b((r=c.value).url)){e.next=15;break}return e.next=8,Object(O.a)(r.url,{fetch:f.fetch});case 8:return a=e.sent,r.imageUrl=URL.createObjectURL(a),e.next=12,new Response(a).arrayBuffer();case 12:s=e.sent,(i=k.a.readFromBinaryFile(s))&&(o=i.DateTime?i.DateTime.replace(":","/").replace(":","/"):void 0,console.log("exifdata"),console.log(o),r.date=new Date(o),null!=i.latitude&&null!=i.longitude&&console.log(y()(i.latitude,"N",i.longitude,"E")));case 15:e.next=3;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),n.e(e.t0);case 22:return e.prev=22,n.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,19,22,25]])})))).apply(this,arguments)}function S(e){return e.sort((function(e,t){return t.date-e.date}))}function P(){return(P=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),!1,""===n){e.next=7;break}return e.next=5,Object(O.d)(n+t.name,t,{slug:t.name,contentType:t.type,fetch:f.fetch});case 5:e.sent,console.log("overwritten");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){h(t)}),[t]),Object(c.useEffect)((function(){h(t).then((function(){return function(e,t){return P.apply(this,arguments)}(new File(["Lorem Ipsum"],"metadata.json",{type:"application/json"}),o)})),console.log(o)}),[t,o]),Object(d.jsx)("div",{className:"grid-view",children:Object(d.jsx)(g.a,{rowHeight:160,cols:4,children:a.map((function(e,t){return function(e,t){return!e.isFolder&&e.imageUrl?Object(d.jsx)(m.a,{children:Object(d.jsx)("img",{loading:"lazy",src:e.imageUrl,alt:e.imageUrl})}):null}(e)}))})})},S=(n(186),n(216));var P=function(e){var t=e.podUrl,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1],o=e.setLoadingAnim,j=e.explorerPath,b=e.setExplorerPath;function p(e){o(!0),h(e).then((function(t){b(e),s(t),o(!1)}))}function h(e){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(l.a.mark((function e(t){var n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("url:",t),e.next=3,Object(O.b)(t,{fetch:f.fetch});case 3:return n=e.sent,e.next=6,Object(O.c)(n);case 6:return c=e.sent,r=[],c.length>1&&(r=c.slice(1,c.length)),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(!0);case 2:h(t).then((function(e){b(t),s(e),o(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){""!==t&&function(){m.apply(this,arguments)}()}),[t]),Object(d.jsx)(S.a,{id:"file-explorer",children:Object(d.jsx)(N,{files:a,openFolder:p,setLoadingAnim:o,currentPath:j})})};var U=function(e){var t=e.explorerPath,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1],o=e.setNotifMsg,j=e.setNotifType,b=e.setLoadingAnim;function p(){return(p=Object(u.a)(l.a.mark((function e(){var n,c,r,s,i,u,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,b(!0);case 3:console.log("uploading ..."),c=Object(x.a)(a);try{for(c.s();!(r=c.n()).done;)s=r.value,n.push(h(s,t))}catch(l){c.e(l)}finally{c.f()}return e.next=8,Promise.all(n);case 8:for(i=e.sent,u="",p=0;p<i.length;++p)i[p]||(u+="Could not upload '"+a[p].name+"', the file might already exist.\n");return e.next=13,b(!1);case 13:if(""===u){e.next=20;break}return e.next=16,j("error");case 16:return e.next=18,o(u);case 18:e.next=24;break;case 20:return e.next=22,j("success");case 22:return e.next=24,o("Files successfully uploaded !!");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.e)(n,t,{slug:t.name,contentType:t.type,fetch:f.fetch});case 3:return e.sent,e.abrupt("return",t.name);case 7:e.prev=7,e.t0=e.catch(0),console.error("ERROR CAUGHT:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function g(){var e,t=[],n=Object(x.a)(a);try{for(n.s();!(e=n.n()).done;){var c=e.value;t.push(Object(d.jsx)("li",{children:c.name}))}}catch(r){n.e(r)}finally{n.f()}return t}return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Upload files"}),Object(d.jsxs)("p",{children:["Current path: ",t]}),Object(d.jsx)("button",{className:"Button",onClick:function(){document.querySelector("#file-input").click()},children:"Add file(s)"}),Object(d.jsxs)("div",{className:"SelectedFilesDiv",children:[Object(d.jsx)("p",{children:"Selected files:"}),Object(d.jsx)("ul",{children:g()})]}),Object(d.jsx)("button",{className:"Button",onClick:function(){return p.apply(this,arguments)},children:"Upload"}),Object(d.jsx)("input",{id:"file-input",type:"file",multiple:"multiple",name:"fileUploadInput",className:"file-selection",accept:"image/*",onChange:function(e){s(e.target.files)}})]})};var L=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Username"}),Object(d.jsx)("h2",{children:"WebId: https://webid..."}),Object(d.jsx)("p",{children:"email: my.email@gmail.com"}),Object(d.jsx)("p",{children:"nickname: superNickname01"})]})};var I=function(e){return Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:"Romain"}),Object(d.jsx)("li",{children:"Jerry"}),Object(d.jsx)("li",{children:"Lin De"}),Object(d.jsx)("li",{children:"Cyrille"})]})};var F=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:"Albums"}),Object(d.jsx)("h2",{children:"Your albums"}),Object(d.jsx)("p",{children:"album1"}),Object(d.jsx)("p",{children:"album1"})]})},C=n(218),B=n(219),E=n(217),R=n(221),T=n(222),A=n(110),D=n.n(A),W=n(220),z=n(111),M=n.n(z),_=n(224),J=n(225),G=n(115),H=n.n(G),Y=n(114),q=n.n(Y),$=n(113),K=n.n($),Q=n(112),V=n.n(Q),X=n(223),Z=n(13),ee=Object(E.a)({fab:{position:"fixed",right:"10px",bottom:"10px"},topBarRightElem:{marginLeft:"auto"},appBar:{background:"black"},bottomNavBtn:{color:"grey","&$selected":{color:"red"}}});function te(e){e.history;var t=e.classes;e.gotoScreen;return Object(d.jsx)(C.a,{position:"static",className:t.appBar,children:Object(d.jsx)(B.a,{children:Object(d.jsx)(W.a,{style:{color:"white"},className:t.topBarRightElem,edge:"start","aria-label":"menu",onClick:function(){e.gotoScreen("/upload")},children:Object(d.jsx)(D.a,{})})})})}function ne(e){var t=e.classes,n=t.bottomNavBtn,r=e.gotoScreen,a=Object(c.useState)("/"),s=Object(i.a)(a,2),o=s[0],l=s[1];return Object(d.jsxs)(R.a,{className:t.appBar,value:o,onChange:function(e,t){l(t),r(t)},showLabels:!0,style:{position:"fixed",width:"300px",borderRadius:"10px",bottom:"10px"},children:[Object(d.jsx)(T.a,{className:n,value:"/",label:"Photos",icon:Object(d.jsx)(M.a,{})}),Object(d.jsx)(T.a,{className:n,value:"/albums",label:"Albums",icon:Object(d.jsx)(V.a,{})}),Object(d.jsx)(T.a,{className:n,value:"/profile",label:"Profile",icon:Object(d.jsx)(K.a,{})}),Object(d.jsx)(T.a,{className:n,value:"/contacts",label:"Contacts",icon:Object(d.jsx)(q.a,{})})]})}function ce(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(!1),b=Object(i.a)(j,2),p=b[0],f=b[1],h=(e.webId,e.podUrl),x=e.explorerPath,O=e.setExplorerPath,m=e.history,g=e.classes,v=Object(c.useState)(null),y=Object(i.a)(v,2);y[0],y[1];function w(e){console.log("goto ".concat(e," ...")),m.push("".concat(e))}function k(e){var t=e.notifMsg,n=e.notifType;return Object(d.jsx)(J.a,{style:{overflowY:"scroll"},in:""!==t&&""!==n,children:Object(d.jsx)(_.a,{severity:n,action:Object(d.jsx)(W.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){a("")},children:Object(d.jsx)(H.a,{fontSize:"inherit"})}),children:t})})}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(te,{classes:g,history:m,gotoScreen:w}),function(){if(p)return Object(d.jsx)(X.a,{size:100,style:{zIndex:1600,position:"fixed",color:"#1a90ff"}})}(),Object(d.jsx)(k,{notifMsg:r,notifType:l}),Object(d.jsx)("div",{className:"content",children:Object(d.jsxs)(Z.c,{children:[Object(d.jsx)(Z.a,{exact:!0,path:"/upload",children:Object(d.jsx)(U,{explorerPath:x,setNotifMsg:a,setNotifType:u,setLoadingAnim:f})}),Object(d.jsx)(Z.a,{exact:!0,path:"/profile",children:Object(d.jsx)(L,{})}),Object(d.jsx)(Z.a,{exact:!0,path:"/contacts",children:Object(d.jsx)(I,{})}),Object(d.jsx)(Z.a,{exact:!0,path:"/albums",children:Object(d.jsx)(F,{})}),Object(d.jsx)(Z.a,{exact:!0,path:"/",children:Object(d.jsx)(P,{podUrl:h,explorerPath:x,setExplorerPath:O,setLoadingAnim:f})})]})}),Object(d.jsx)(ne,{classes:g,gotoScreen:w})]})}var re=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),o=s[0],l=s[1],u=Object(c.useState)(""),j=Object(i.a)(u,2),b=j[0],p=j[1],f=Object(c.useState)(""),x=Object(i.a)(f,2),O=x[0],m=x[1],g=Object(Z.f)(),v=ee();return Object(c.useEffect)((function(){m(b)}),[b]),Object(d.jsx)("div",{className:"app-div",children:""!==o&&n?Object(d.jsx)(ce,{classes:v,webId:o,podUrl:b,history:g,explorerPath:O,setExplorerPath:m}):Object(d.jsx)(h,{setWebId:l,setLoggedIn:r,setPodUrl:p})})},ae=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,252)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},se=n(76);s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(se.a,{children:Object(d.jsx)(re,{})})}),document.getElementById("root")),ae()}},[[190,1,2]]]);
//# sourceMappingURL=main.3a3c2340.chunk.js.map