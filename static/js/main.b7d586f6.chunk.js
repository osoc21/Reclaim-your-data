(this.webpackJsonpreclaim_your_data=this.webpackJsonpreclaim_your_data||[]).push([[0],{128:function(e,t,n){},129:function(e,t,n){},131:function(e,t,n){},175:function(e,t,n){},186:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(11),s=n.n(a),i=(n(128),n(7)),l=(n(129),n(1)),o=n.n(l),u=n(4),j=(n(131),n(214)),h=n(32),b=n(3);var d=function(e){var t=e.setLoggedIn,n=e.setWebId,c=null;function r(){return(r=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.handleIncomingRedirect)();case 2:(c=Object(h.getDefaultSession)()).info.isLoggedIn&&(t(!0),n(c.info.webId));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),Object(b.jsx)("div",{className:"login-frame",children:Object(b.jsx)(j.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return Object(h.login)({oidcIssuer:"https://broker.pod.inrupt.com",redirectUrl:window.location.href,clientName:"Getting started app"})},children:"Log-in"})})},p=n(31),f=n(44),O=n(216),x=n(217),g=n(218);n(175);var m=function(e){e.files;var t=e.openLink,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1];function l(e){return e.endsWith("/")}function j(e){return e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".png")}function d(e){var t=e.match(/^https:\/\/pod\.inrupt\.com(\/\w+)*\/(\w+)/);return console.log(t),t[t.length-1]}function m(){return(m=Object(u.a)(o.a.mark((function e(t){var n,c,r,a,i,u,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Fetching"),console.log(t),n=[],c=Object(p.a)(t),e.prev=4,c.s();case 6:if((r=c.n()).done){e.next=19;break}if(a=r.value,console.log(a),i={url:a.url,shortName:d(a.url),isFolderBoolean:l(a.url),imageUrl:null},n.push(i),!j(i.url)){e.next=17;break}return e.next=14,Object(f.a)(i.url,{fetch:h.fetch});case 14:u=e.sent,b=URL.createObjectURL(u),i.imageUrl=b;case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:s(n);case 28:case"end":return e.stop()}}),e,null,[[4,21,24,27]])})))).apply(this,arguments)}function v(e){return console.log("imageUrl: "+e.imageUrl),e.isFolderBoolean||!j(e.url)?Object(b.jsx)("p",{onClick:function(){return t(e.url)},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-folder",viewBox:"0 0 16 16",children:Object(b.jsx)("path",{d:"M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"})})}):e.imageUrl?Object(b.jsx)("img",{src:e.imageUrl,alt:e.imageUrl}):Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16",children:[Object(b.jsx)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}),Object(b.jsx)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"})]})}return Object(c.useEffect)((function(){!function(e){m.apply(this,arguments)}(e.files)}),[e.files]),Object(b.jsx)("div",{className:"grid-view",children:Object(b.jsx)(O.a,{cols:2,children:a.map((function(e,t){return Object(b.jsxs)(x.a,{children:[v(e),Object(b.jsx)(g.a,{title:e.shortName})]},t)}))})})},v=(n(186),/https:\/\/(\w+\.)solidweb.org\/|https:\/\/pod\.inrupt\.com\/\w+\//);function w(e){return e.match(v)[0]}var k=n(219),y=n(226);var C=function(e){var t=w(e.webId),n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)(!1),j=Object(i.a)(l,2),d=(j[0],j[1]),p=e.explorerPath,O=e.setExplorerPath;function x(e){d(!0),g(e).then((function(t){O(e),s(t),d(!1)}))}function g(e){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(o.a.mark((function e(t){var n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(t,{fetch:h.fetch});case 2:return n=e.sent,e.next=5,Object(f.c)(n);case 5:return c=e.sent,r=[],c.length>1&&(r=c.slice(1,c.length)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return""===p&&O(t),0===a.length&&p===t&&g(t).then((function(e){O(t),s(e)})),Object(b.jsxs)(k.a,{children:[Object(b.jsx)(y.a,{children:Object(b.jsxs)("div",{id:"file-explorer",children:[Object(b.jsx)("button",{className:"Button",id:"go-back",onClick:function(){if(p.length>t.length&&p!==t){var e=p.slice(0,-1).lastIndexOf("/");x(p.slice(0,e+1))}else alert("Cannot go back from POD root.")},children:"Go back"}),Object(b.jsxs)("p",{children:["Files for current path (",p,"):"]})]})}),Object(b.jsx)(m,{files:a,openLink:function(e){g(e).then((function(t){O(e),s(t)}))}})]})};var I=function(e){var t=e.explorerPath,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1];function l(e,t){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.d)(n,t,{slug:t.name,contentType:t.type,fetch:h.fetch});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert("file '"+t.name+"' already exists.");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function d(){var e,t=[],n=Object(p.a)(a);try{for(n.s();!(e=n.n()).done;){var c=e.value;t.push(Object(b.jsx)("li",{children:c.name}))}}catch(r){n.e(r)}finally{n.f()}return t}return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Upload files"}),Object(b.jsxs)("p",{children:["Current path: ",t]}),Object(b.jsx)("button",{className:"Button",onClick:function(){document.querySelector("#file-input").click()},children:"Add file(s)"}),Object(b.jsxs)("div",{className:"SelectedFilesDiv",children:[Object(b.jsx)("p",{children:"Selected files:"}),Object(b.jsx)("ul",{children:d()})]}),Object(b.jsx)("button",{className:"Button",onClick:function(){var e,n=Object(p.a)(a);try{for(n.s();!(e=n.n()).done;){l(e.value,t)}}catch(c){n.e(c)}finally{n.f()}},children:"Upload"}),Object(b.jsx)("input",{id:"file-input",type:"file",multiple:"multiple",name:"fileUploadInput",className:"file-selection",onChange:function(e){s(e.target.files)}})]})},N=n(221),S=n(222),U=n(220),P=n(224),L=n(225),B=n(228),A=n(83),F=n.n(A),M=n(223),z=n(114),E=n.n(z),H=n(113),W=n.n(H),D=n(15),T=Object(U.a)({fab:{position:"fixed",right:"10px",bottom:"10px"},HamburgerMenu:{marginLeft:"auto"}});function _(e){var t=e.history,n=e.classes;return Object(b.jsx)(N.a,{position:"static",children:Object(b.jsxs)(S.a,{children:[Object(b.jsx)(W.a,{color:"inherit",onClick:function(){return t.goBack()}}),Object(b.jsx)(M.a,{className:n.HamburgerMenu,edge:"start",color:"inherit","aria-label":"menu",children:Object(b.jsx)(E.a,{})})]})})}function R(e){var t=e.webId,n=Object(D.h)(),r=e.classes,a=Object(c.useState)(null),s=Object(i.a)(a,2),l=s[0],o=s[1],u=function(){o(null)};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Home"}),Object(b.jsx)(C,{webId:t,explorerPath:e.explorerPath,setExplorerPath:e.setExplorerPath}),Object(b.jsx)(P.a,{className:r.fab,color:"primary","aria-label":"add","aria-controls":"simple-menu",onClick:function(e){o(e.currentTarget)},"aria-haspopup":"true",children:Object(b.jsx)(F.a,{})}),Object(b.jsxs)(L.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:u,children:[Object(b.jsx)(B.a,{onClick:function(){console.log("goto file upload screen ..."),e.history.replace("".concat(n.url,"/upload"))},children:"Upload files"}),Object(b.jsx)(B.a,{onClick:u,children:"New folder"})]})]})}var G=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),l=s[0],o=s[1],u=Object(c.useState)(""),j=Object(i.a)(u,2),h=j[0],p=j[1],f=Object(D.g)(),O=T();function x(){return""!==l&&n}return Object(b.jsx)("div",{className:"app-div",children:Object(b.jsxs)(D.d,{children:[Object(b.jsxs)(D.b,{path:"/login",children:[Object(b.jsx)(d,{setWebId:o,setLoggedIn:r}),x()?Object(b.jsx)(D.a,{to:"/"}):null]}),Object(b.jsx)(D.b,{path:"/home/upload",children:x()?Object(b.jsxs)("div",{children:[Object(b.jsx)(_,{classes:O,history:f}),Object(b.jsx)(I,{explorerPath:h})]}):Object(b.jsx)(D.a,{to:"/"})}),Object(b.jsxs)(D.b,{path:"/home",children:[Object(b.jsx)(_,{classes:O,history:f}),x()?Object(b.jsx)(R,{classes:O,webId:l,history:f,explorerPath:h,setExplorerPath:p}):Object(b.jsx)(D.a,{to:"/"})]}),Object(b.jsx)(D.b,{path:"/",children:x()?Object(b.jsx)(D.a,{push:!0,to:"/home"}):Object(b.jsx)(D.a,{push:!0,to:"/login"})})]})})},J=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,255)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},q=n(84);s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(q.a,{children:Object(b.jsx)(G,{})})}),document.getElementById("root")),J()}},[[190,1,2]]]);
//# sourceMappingURL=main.b7d586f6.chunk.js.map