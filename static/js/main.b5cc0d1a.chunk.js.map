{"version":3,"sources":["constants.js","pod.js","Login.js","GridView.js","FileExplorer.js","FileUpload.js","rdf.js","Profile.js","Contacts.js","Albums.js","ContactDetails.js","BottomNavBar.js","MenuBar.js","Notification.js","Home.js","App.js","reportWebVitals.js","index.js"],"names":["GITHUB_PAGE_LINK","IMAGE_RELATIVE_PATH","tempPodPattern","getPODUrlFromWebId","webId","match","isFolderUrl","url","endsWith","Login","props","setLoggedIn","setWebId","setPodUrl","session","a","handleIncomingRedirect","getDefaultSession","info","isLoggedIn","newPodUrl","handleRedirectAfterLogin","className","Button","size","variant","color","onClick","login","oidcIssuer","redirectUrl","window","location","href","clientName","style","marginTop","event","startIcon","GridView","files","setLoadingAnim","useState","entries","setEntries","openImageEntryIdx","setOpenImageEntryIdx","currentPath","loadedImagesCounter","useRef","nbImages","isImage","sortByDate","sort","b","date","dummyMetadataFile","File","type","console","log","name","metadataFile","getFile","fetch","text","fileContent","parsedContent","JSON","parse","length","fetchImageData","sortedContent","overwriteFile","slug","contentType","processedEntries","entry","raw","imageUrl","URL","createObjectURL","Response","arrayBuffer","exifData","exif","readFromBinaryFile","dateTime","DateTime","replace","undefined","Date","latitude","longitude","updateLoadingAnim","current","useEffect","readMetadataFile","DialogTitle","withStyles","theme","root","margin","padding","spacing","closeButton","position","right","top","palette","grey","children","classes","onClose","other","disableTypography","Typography","IconButton","Transition","React","forwardRef","ref","Grow","timeout","handleImageModalClose","canOpenImageDetail","ImageList","rowHeight","cols","map","folderEntry","index","idx","isFolder","ImageListItem","onLoad","loading","src","alt","e","renderEntry","imgUrl","imgName","shortName","imgDate","Dialog","display","justifyContent","width","height","TransitionComponent","open","DialogContent","maxWidth","maxHeight","dividers","overflow","toString","showOpenImage","FileExplorer","POD_URL","podUrl","setFiles","explorerPath","setCurrentPath","setExplorerPath","getFilesFromResourceURL","getSolidDataset","fetchedFiles","getThingAll","res","slice","folderUrl","then","fileArray","getRootFiles","Container","id","disableGutters","openFolder","FileUpload","selectedFiles","setSelectedFiles","setNotifMsg","setNotifType","upload","promiseArray","file","push","placeFileInContainer","Promise","all","promiseResults","errorMsg","i","updateMetadataFile","makeMetaDataEntry","fileUrl","makeMetadataFile","jsObjects","jsonString","stringify","newFileEntries","Array","from","newMetadataFile","prevContent","newContent","resContent","targetContainerURL","saveFileInContainer","selectedFilesToReact","document","querySelector","click","endIcon","multiple","accept","onChange","target","queryEngine","newEngine","require","executeQuery","query","sources","comunicaSources","sourceFile","store","Store","method","response","textStream","headers","get","resolve","reject","rdfParser","split","baseIRI","on","quad","addQuad","error","value","result","bindings","metadata","getEmailCardUrlQuery","getEmailFromEmailCardUrlQuery","Profile","WEB_ID","username","setUsername","role","setRole","email","setEmail","useSession","parseSingleResult","profileDocumentURI","myDataset","profile","getThing","parsedUsername","getStringNoLocale","VCARD","fn","parsedRole","parsedEmail","resBindings","parsedEmailCardUrl","showField","field","getProfileData","getContactsBasicInfoQuery","Contacts","gotoScreen","podURL","setBindings","getContactsBasicInfoSource","Contact","binding","turtleFileUrl","fetchContacts","Albums","getWebIdFromPersonFileQuery","getRoleQuery","ContactDetails","contactUsername","realProps","params","contactPersonFileUrl","routingHiddenParams","contactWebId","setContactWebId","contactPodUrl","setContactPodUrl","parsedWebId","newContactPodUrl","getContactDetailsFromPersonFile","BottomNavBar","btnClass","bottomNavBtn","setLocation","handleChange","newValue","BottomNavigation","appBar","showLabels","bottom","BottomNavigationAction","label","icon","MenuBar","AppBar","Toolbar","cursor","topBarRightFirstElem","marginLeft","edge","Notification","notifMsg","notifType","Collapse","overflowY","in","Alert","severity","action","fontSize","Home","loadingAnim","setRoutingHiddenParams","history","screenPath","hiddenParams","CircularProgress","zIndex","opacity","showLoadingAnimation","exact","path","render","useStyles","makeStyles","fab","background","App","loggedIn","useHistory","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b5cc0d1a.chunk.js","sourcesContent":["\n\nconst GITHUB_PAGE_LINK = \"https://github.com/osoc21/Reclaim-your-data\";\nconst IMAGE_RELATIVE_PATH = \"images/\";\n\nexport {GITHUB_PAGE_LINK, IMAGE_RELATIVE_PATH};\n","\nconst tempPodPattern = /https:\\/\\/(\\w+\\.)solidweb.org\\/|https:\\/\\/pod\\.inrupt\\.com\\/\\w+\\//;\n\n/**\n * Takes a web id as parameter, and returns the pod url associated to it.\n * For inrupt PODs, this comes down to isolating a prefix of the web id.\n * For other pod providers, this might be different.\n * @param  {[type]} webId The web id of the user\n * @return {[type]}       The pod url associated with the web id\n */\nfunction getPODUrlFromWebId(webId) {\n    return webId.match(tempPodPattern)[0];\n}\n\n/**\n * Checks whether or not the provided URL is a folder.\n *\n * @param url {string} `URL`\n * @returns {boolean} boolean\n */\nfunction isFolderUrl(url) {\n    return url.endsWith(\"/\");\n}\n\n/**\n * Return the name of a file or folder associated with the provided URL.\n *\n * @param url {string} `URL to the file or folder.`\n * @returns {string} `Name of file.`\n */\nfunction getFileNameFromUrl(url) {\n    // let regex = /^https:\\/\\/pod\\.inrupt\\.com(\\/\\w+)*\\/(\\w+)/;\n    let name = \"\";\n    if (isFolderUrl(url))\n    {\n        console.log(\"folder!!\");\n        let slashPos = url.slice(0, url.length - 2).lastIndexOf(\"/\");\n        name = url.slice(slashPos + 1, url.length-2);\n    }\n    else\n    {\n        console.log(\"file!!\");\n        let slashPos = url.lastIndexOf(\"/\");\n        name = url.slice(slashPos + 1, url.length-1);\n    }\n    \n    return name;\n}\n\n\nexport {getPODUrlFromWebId, isFolderUrl, getFileNameFromUrl};\nexport default getPODUrlFromWebId;","\nimport {GITHUB_PAGE_LINK} from \"./constants\";\nimport \"./Login.css\";\nimport {getPODUrlFromWebId} from './pod';\nimport React from \"react\";\nimport {Button} from '@material-ui/core';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport {\n  login,\n  handleIncomingRedirect,\n  getDefaultSession,\n} from '@inrupt/solid-client-authn-browser';\n\n\n/**\n * The Login component takes care of going to the proper POD provider login page, and handles\n * the redirect after submitting the credentials. On success, the component initializes\n * the web id, the pod url and the loggin flag of the app.\n *\n * @component\n * @param {[type]} props [description]\n */\nfunction Login(props) {\n\tlet setLoggedIn = props.setLoggedIn;\n\tlet setWebId = props.setWebId;\n\tlet setPodUrl = props.setPodUrl;\n\n\tlet session = null;\n\n\t/**\n\t * Function taken from the inrupt examples.\n\t * Starts the login process by calling the login() function.\n\t * @return {[type]} The result of the login\n\t */\n\tfunction loginToInruptDotCom() {\n\t  let chosenIssuer = \"https://broker.pod.inrupt.com\";\n\t  return login({\n\t    oidcIssuer: chosenIssuer,\n\t    redirectUrl: window.location.href,\n\t    clientName: \"Getting started app\"\n\t  });\n\t}\n\n\t/** \n\t * Function taken from the inrupt examples.\n\t * When redirected after login, finish the process by retrieving session information.\n\t * This is done with the handleIncomingRedirect() function, and then using a session object.\n\t */\n\tasync function handleRedirectAfterLogin() {\n\t  await handleIncomingRedirect();\n\n\t  session = getDefaultSession();\n\n\t  if (session.info.isLoggedIn) {\n\t    // Update the page with the status.\n\t    await setLoggedIn(true);\n\t    await setWebId(session.info.webId);\n\t    let newPodUrl = getPODUrlFromWebId(session.info.webId);\n\t    await setPodUrl(newPodUrl);\n\t  }\n\t}\n\n\thandleRedirectAfterLogin();\n\n\treturn (\n\t\t\t<div className=\"login-frame\">\n\t    \t<Button size=\"large\" variant=\"contained\" color=\"primary\" onClick={loginToInruptDotCom}>Log in with Inrupt.com</Button>\n\t    \t<Button size=\"small\" variant=\"outlined\" color=\"default\" style={{marginTop:\"10px\"}}\n          onClick={event =>  window.location.href=GITHUB_PAGE_LINK}\n          startIcon={<GitHubIcon/>}>\n          Go to Github page\n        </Button>\n    \t</div>\n\t);\n}\n\n\nexport default Login;","import React, {useEffect, useState, useRef} from \"react\";\nimport {fetch} from '@inrupt/solid-client-authn-browser';\nimport {getFile,    overwriteFile} from '@inrupt/solid-client';\nimport {ImageList, ImageListItem} from '@material-ui/core';\nimport Modal from '@material-ui/core/Modal';\nimport Container from '@material-ui/core/Container';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport Grow from '@material-ui/core/Grow';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport dms2dec from \"dms2dec\";\nimport \"./GridView.css\";\nimport exif from 'exif-js';\n\n\n/**\n * The GridView component takes care of fetching images from the pod, getting\n * their EXIF data at the same time, and display them in a grid.\n * \n * @param {[type]} props [description]\n * @returns {JSX.Element}\n */\nfunction GridView(props) {\n    let files = props.files;\n    let setLoadingAnim = props.setLoadingAnim;\n    const [entries, setEntries] = useState([]);\n    let [openImageEntryIdx, setOpenImageEntryIdx] = useState(null);\n    let currentPath = props.currentPath;\n    let loadedImagesCounter = useRef(0);\n    let nbImages = useRef(0);\n\n    useEffect(() => {\n        nbImages.current = 0;\n        loadedImagesCounter.current = 0;\n\n        if (currentPath !== \"\")\n        {\n            readMetadataFile();\n        }\n    }, [files]);\n\n    /**\n     * Checks if a url is the url of a folder.\n     * @param {String} url \n     * @returns {Boolean}\n     */\n    function isFolder(url) {\n        return url.endsWith(\"/\");\n    }\n\n    /**\n     * Checks if a url is the url of an image.\n     * It currently supports .jpg/.jpeg/.png extentions.\n     * @param {String} url \n     * @returns {Boolean}\n     */\n    function isImage(url) {\n        return url.endsWith(\".jpg\") || url.endsWith(\".jpeg\") || url.endsWith(\".png\");\n    }\n\n    /*\n     *\n     * Gets the name of the deepest folder or file in the url.\n     * @param {String} url \n     * @returns {String} name of the deepest folder or file in the url\n     */\n    // function getName(url) {\n    //     let regex = /^https:\\/\\/pod\\.inrupt\\.com(\\/\\w+)*\\/(\\w+)/;\n    //     const match = url.match(regex);\n    //     // get last matched part in order to support nested folders\n    //     return match[match.length - 1];\n    // }\n\n\n    /**\n     * Sorts files by descending dates\n     * @param {FileList} files - list of files\n     * @returns {FileList} sorted list of files\n     */\n    function sortByDate(files) {\n        return files.sort((a, b) => b.date - a.date);\n    }\n\n\n    async function readMetadataFile(){\n        // initialize the file with '[]' as text content so that\n        // the file is a valid JSON file\n        let dummyMetadataFile = new File([\"[]\"], \"metadata.json\", {\n            type: \"application/json\"\n        }); \n        console.log(currentPath + dummyMetadataFile.name);\n        let metadataFile = dummyMetadataFile;\n\n        try\n        {\n            metadataFile = await getFile(currentPath + dummyMetadataFile.name, {fetch: fetch});\n            let fileContent = await metadataFile.text();\n            const parsedContent = JSON.parse(fileContent);\n\n            if(parsedContent.length > 0){\n                console.log(\"fetchingImageData\");\n                await fetchImageData(parsedContent);\n                let sortedContent = sortByDate(parsedContent);\n                await setEntries(sortedContent);\n            } \n     \n        }\n        // the metadata file does not exist, so we use the dummy\n        // metadata file and write it to the POD\n        catch(error)\n        {\n            const savedFile = await overwriteFile(currentPath + metadataFile.name,\n            metadataFile,\n            {\n                slug: metadataFile.name,\n                contentType: metadataFile.type,\n                fetch: fetch\n            });\n        }\n\n    }\n\n    /**\n     * Gets image file URL (Blob) and data like EXIF DateTime and potentially location from images stored on the Solid pod.\n     * @param {Object} processedEntries \n     */\n    async function fetchImageData(processedEntries) {\n        for (const entry of processedEntries) {\n            if (isImage(entry.url)) {\n                let raw = await getFile(entry.url, {fetch: fetch});\n                entry.imageUrl = URL.createObjectURL(raw);\n\n                // console.log(\"fetching EXIF\");\n                if(entry.date === null){\n                    let arrayBuffer = await new Response(raw).arrayBuffer();\n                    let exifData = exif.readFromBinaryFile(arrayBuffer);\n                    if (exifData) {\n                        let dateTime = exifData.DateTime ? exifData.DateTime.replace(\":\", \"/\").replace(\":\", \"/\") : undefined\n\n                        /*\n                        This is also the place where you would extract other EXIF data like location.\n                         */\n\n                        //let latitude = exifData.GPSLatitude && exifData.GPSLatitude[0] ? exifData.GPSLatitude : null\n                        //let longitude = exifData.GPSLongitude && exifData.GPSLongitude[0] ? exifData.GPSLongitude : null\n                        //console.log(`exifdata`);\n                        //console.log(dateTime);\n                        entry.date = new Date(dateTime);\n                        if (exifData.latitude != null && exifData.longitude != null) {\n                            // note: the dms2dec lib expects 4 parameters, but we haven't found a way to parse if the picture\n                            // was taken in the NESW direction, so at the moment it's hardcoded\n                            // TODO: extract NESW direction from EXIF data\n                            //console.log(dms2dec(exifData.latitude, \"N\", exifData.longitude, \"E\"));\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    /** If called with a counter of loaded images higher than the size of the entries array,\n     * stops the loading animation.\n     */\n    function updateLoadingAnim() {\n        loadedImagesCounter.current += 1;\n        if (loadedImagesCounter >= nbImages) {\n            setLoadingAnim(false);\n        }\n    }\n\n\n    /**\n     * Makes an ImageListItem for each image.\n     * @param {Object} folderEntry - entry that needs to be rendered.\n     * @param {Number} idx - index of entry in array is used as key for React list item.\n     * @returns {ReactComponent} \n     */\n    function renderEntry(folderEntry, idx) {\n        if ((!folderEntry.isFolder) && folderEntry.imageUrl) {\n\n            let url = folderEntry.imageUrl;\n\n            return (<ImageListItem key={idx}>\n                        <img onLoad={updateLoadingAnim} loading=\"lazy\" src={url} \n                        alt={url} onClick={(e) => {setOpenImageEntryIdx(idx)}}/>\n                    </ImageListItem>);\n        }\n\n        return null;\n    }\n\n\n    const styles = (theme) => ({\n      root: {\n        margin: 0,\n        padding: theme.spacing(2),\n      },\n      closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500],\n      },\n    });\n\n    const DialogTitle = withStyles(styles)((props) => {\n      const { children, classes, onClose, ...other } = props;\n      return (\n        <MuiDialogTitle disableTypography className={classes.root} {...other}>\n          <Typography variant=\"h6\">{children}</Typography>\n          {onClose ? (\n            <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\n              <CloseIcon color=\"secondary\"/>\n            </IconButton>\n          ) : null}\n        </MuiDialogTitle>\n      );\n    });\n\n    const Transition = React.forwardRef(function Transition(props, ref) {\n        return <Grow timeout={6000} ref={ref} {...props} />;\n    });\n\n\n    /**\n     * Sets the image entry index state to null, closing the image details view.\n     * @return {[type]} [description]\n     */\n    async function handleImageModalClose()\n    {\n        await setOpenImageEntryIdx(null);\n    }\n\n    /**\n     * Simple convenience function that returns true if openImageEntryIdx\n     * is defined and not null.\n     * @return {[type]} A boolean telling if openImageEntryIdx is defined and not null\n     */\n    function canOpenImageDetail()\n    {\n        // zero is implicitely converted to false\n        // but zero is a valid index !!! so check for that particular case too\n        if (openImageEntryIdx || openImageEntryIdx === 0)\n        {\n            return true;\n        }\n        return false;\n    }\n\n\n    function showOpenImage()\n    {\n        if (canOpenImageDetail())\n        {\n            let entry = entries[openImageEntryIdx];\n            let imgUrl = entry.imageUrl;\n            let imgName = entry.shortName;\n            let imgDate = entry.date;\n\n            return (<Dialog style={{margin: \"auto\", \n                    display: \"flex\", justifyContent: \"center\", \n                    width:\"100vw\", height:\"100vh\"}}\n                    TransitionComponent={Transition}\n                    open={() => {return canOpenImageDetail()}}\n                    aria-labelledby=\"simple-modal-title\"\n                    aria-describedby=\"simple-modal-description\">\n                        <DialogTitle onClose={handleImageModalClose}>\n                            {imgName ? <p>{imgName}</p> : <>&nbsp;</>}\n                        </DialogTitle>\n                        <DialogContent style={{display:\"flex\", justifyContent:\"center\"}}>\n                            <img src={imgUrl} alt={imgUrl} style={{maxWidth:\"80%\", maxHeight: \"80%\"}}/>\n                        </DialogContent>\n                        <DialogContent dividers style={{overflow: \"hidden\"}}>\n                            {imgDate ? <p>Date: {imgDate.toString()}</p> : <p>No date</p>}\n                        </DialogContent>\n                    </Dialog>);\n        }\n\n        return null;\n    }\n\n    /**\n     * Renders the ImageList with ImageListItems to be shown in the app.\n     */\n    return (\n        <div className=\"grid-view\">\n            <ImageList rowHeight={160} cols={4}>\n                {entries.length > 0 ? entries.map((folderEntry, index) => renderEntry(folderEntry, index)) :\n                    <h4><i>Nothing to display</i></h4>}\n                {showOpenImage()}\n            </ImageList>\n        </div>\n    );\n}\n\nexport default GridView;","\nimport {IMAGE_RELATIVE_PATH} from \"./constants\"\nimport React, {useEffect, useState} from \"react\";\nimport GridView from \"./GridView\";\nimport \"./FileExplorer.css\"\nimport {fetch} from '@inrupt/solid-client-authn-browser';\nimport {getSolidDataset, getThingAll} from '@inrupt/solid-client';\nimport {Container} from '@material-ui/core';\n\n\n/**\n * The FileExplorer component fetches images and updates it's state\n * once done. This allows a GridView to display the images, and can also be used\n * to implement a files and folder navigation system.\n * \n * @param {[type]} props [description]\n */\nfunction FileExplorer(props) {\n    const POD_URL = props.podUrl;\n\n    let [files, setFiles] = useState([]);\n\n    let setLoadingAnim = props.setLoadingAnim;\n    let currentPath = props.explorerPath;\n    let setCurrentPath = props.setExplorerPath;\n\n    function openFolder(url) {\n        setLoadingAnim(true);\n        // its important to set the current path first !!\n        getFilesFromResourceURL(url).then((fileArray) => {\n            setCurrentPath(url);\n            setFiles(fileArray);\n            setLoadingAnim(false);\n        });\n    }\n\n    /**\n     * Takes an url and fetches all the files and containers at that location if possible.\n     * @param  {[type]} url The url of the container\n     * @return {[type]}     A list of file urls\n     */\n    async function getFilesFromResourceURL(url) {\n        const fetchedFiles = await getSolidDataset(url, {fetch: fetch});\n        let children = await getThingAll(fetchedFiles);\n\n        let res = []\n\n        // note: the first child element is self\n        if (children.length > 1) {\n            res = children.slice(1, children.length)\n        }\n\n        return res;\n    }\n\n\n\n\n    /** \n     * Fetch all files from the given path given relative to the root\n     * @return void\n     */\n    async function getRootFiles() {\n        let folderUrl = POD_URL + IMAGE_RELATIVE_PATH;\n        await setLoadingAnim(true);\n        getFilesFromResourceURL(folderUrl).then((fileArray) => {\n            setCurrentPath(folderUrl);\n            setFiles(fileArray);\n            // if no files were obtained (empty folder)\n            // then stop loading animation directly\n            if (files.length === 0)\n            {\n                setLoadingAnim(false);\n            } \n        });\n    }\n\n    useEffect(() => {\n        if (POD_URL !== \"\") {\n            getRootFiles();\n        }\n    }, [POD_URL]);\n\n\n    return (\n        <Container id=\"file-explorer\" disableGutters=\"true\">\n            <GridView files={files} openFolder={openFolder} setLoadingAnim={setLoadingAnim} currentPath={currentPath}/>\n        </Container>\n    );\n}\n\nexport default FileExplorer;\n","import \"./FileUpload.css\"\nimport {isFolderUrl, getFileNameFromUrl} from \"./pod\";\n\nimport React, {useState} from \"react\"\nimport {\n    saveFileInContainer,\n    getFile,\n    overwriteFile\n} from '@inrupt/solid-client';\n\nimport {\n    fetch\n} from '@inrupt/solid-client-authn-browser';\n\nimport Button from '@material-ui/core/Button';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport SendIcon from '@material-ui/icons/Send';\n\n/**\n * The file upload component allows the user to select files, and once done,\n * display the upload button that can be clicked on the send the files on the POD.\n *\n * @component\n * @param {[type]} props The current path url (string), the notification message and type (strings)\n * and the loading animation status (bool).\n * @returns {JSX.Element}\n */\nfunction FileUpload(props) {\n    let currentPath = props.explorerPath;\n    let [selectedFiles, setSelectedFiles] = useState([]);\n    let setNotifMsg = props.setNotifMsg;\n    let setNotifType = props.setNotifType;\n    let setLoadingAnim = props.setLoadingAnim;\n\n    /**\n     * Calls placeFileInContainer for each selected file,\n     * placing all the Promises in an array before waiting for them to \n     * finish. Once all async operations are completed, the function checks if any of them\n     * failed, and if so, displays an error notification. If every operation succeeds, displays\n     * a success notification.\n     * \n     * @async\n     */\n    async function upload() {\n        let promiseArray = [];\n        await setLoadingAnim(true);\n\n        for (let file of selectedFiles) {\n            promiseArray.push(placeFileInContainer(file, currentPath));\n        }\n        let promiseResults = await Promise.all(promiseArray);\n        let errorMsg = \"\";\n\n        for (let i = 0; i < promiseResults.length; ++i) {\n            let res = promiseResults[i];\n\n            // promise is undefined if the upload wasn't successful\n            if (!res) {\n                errorMsg += \"'\" + selectedFiles[i].name + \"'\";\n            }\n        }\n\n        await setLoadingAnim(false);\n\n        // there is an error or more\n        if (errorMsg !== \"\") {\n            await setNotifType(\"error\");\n            await setNotifMsg(\"Could not upload file(s). The file(s) might already exist: \" + errorMsg);\n        } else if (selectedFiles.length > 0) {\n            await setNotifType(\"success\");\n            await setNotifMsg(\"Files successfully uploaded !!\");\n            await updateMetadataFile(selectedFiles);\n        } else if (selectedFiles.length === 0) {\n            await setNotifType(\"info\");\n            await setNotifMsg(\"Nothing to upload.\");\n        }\n    }\n\n    /**\n     * Return an object with keys **date**, **isFolder**, **imageUrl**, **shortName**, **url**.\n     *\n     * @param file {File} `File object.`\n     * @returns {{date: Date, isFolder: boolean, imageUrl: string, shortName: string, url: string}} `JS Object`\n     */\n    function makeMetaDataEntry(file) {\n        let fileUrl = currentPath + file.name;\n        let metadataEntry = {\n            url: fileUrl,\n            shortName: file.name,\n            isFolder: isFolderUrl(fileUrl),\n            imageUrl: null,\n            date: null\n        };\n        return metadataEntry;\n    }\n\n    /**\n     * Return a metadata.json file containing the entries of the files in the pod.\n     *\n     * @param jsObjects {Object[]}\n     * @returns {File} File\n     */\n    function makeMetadataFile(jsObjects) {\n        // parse the incoming JS objects to a string for the File API\n        const jsonString = `${JSON.stringify(jsObjects)}`;\n        return new File([jsonString], \"metadata.json\", {\n            type: \"application/json\"\n        });\n    }\n\n    /**\n     * Update the entries in metadata.json file with newly uploaded files to the pod.\n     *\n     * @async\n     * @returns {void} void\n     * @param {[File]} newFileEntries `Array of File to add.`\n     */\n    async function updateMetadataFile(newFileEntries) {\n        let processedEntries = Array.from(newFileEntries).map(entry => makeMetaDataEntry(entry));\n        let metadataFile = makeMetadataFile(processedEntries);\n        let file = null;\n        let newMetadataFile = null;\n\n        try\n        {\n            file = await getFile(currentPath + metadataFile.name, {fetch: fetch});\n            let fileContent = await file.text();\n            const prevContent = JSON.parse(fileContent);\n            const newContent = [...prevContent, ...processedEntries];\n            const resContent = await Promise.all(newContent);\n            newMetadataFile = makeMetadataFile(resContent);\n        }\n        catch(error)\n        {\n            newMetadataFile = makeMetadataFile(processedEntries);\n        }\n\n        const savedFile = await overwriteFile(\n            currentPath + newMetadataFile.name,\n            newMetadataFile,\n            {\n                slug: newMetadataFile.name,\n                contentType: newMetadataFile.type,\n                fetch: fetch\n            });\n    }\n\n    /**\n     * Upload file into the targetContainer.\n     * \n     * @async\n     * @param  {[type]} file               A javascript File object\n     * @param  {[type]} targetContainerURL The url of the POD container where the file should be placed\n     * @return {[string]}                  The name of the file\n     */\n    async function placeFileInContainer(file, targetContainerURL) {\n        try {\n            const savedFile = await saveFileInContainer(\n                targetContainerURL,           // Container URL\n                file,                         // File\n                {\n                    slug: file.name,\n                    contentType: file.type, fetch: fetch\n                }\n            );\n            return file.name;\n        } catch (error) {\n            //console.log(\"ERROR CAUGHT:\", error);\n            // Any error is handled in the UI, no need to print it to the console.\n        }\n    }\n\n    /**\n     * Triggers a click event on the input[type=\"file\"] element so that\n     * the associated file selecion dialog can open.\n     * @returns void\n     */\n    function openFileSelectionWindow() {\n        document.querySelector(\"#file-input\").click();\n    }\n\n    /**\n     * Convert the selected files to upload to an array of JSX.Element.\n     * Note that the `<li>` is **NOT** HTML, but a JSX.Element.\n     *\n     * @returns {[JSX.Element]} Array of JSX.Element.\n     */\n    function selectedFilesToReact() {\n        let res = [];\n        let i = 0;\n        // selectedFiles is iterable but not an array, \n        // so map() and forEach() functions don't work\n        for (let file of selectedFiles) {\n            res.push(<li key={i}>{file.name}</li>);\n            ++i;\n        }\n\n        return res;\n    }\n\n    /**\n     * Displays the list of selected files as well as a button to send them\n     * to the POD. This returned component will be displayed only if\n     * file(s) were selected beforehand.\n     * @return {JSX.Element} A div element containing the selected file(s) list and the upload button\n     */\n    function showUploadSection() {\n        return (\n            <div className=\"upload-section\">\n                <h4>Selected files:</h4>\n                <ul>{selectedFilesToReact()}</ul>\n                <Button variant=\"contained\" color=\"primary\" onClick={upload}\n                        endIcon={<SendIcon/>}>Upload</Button>\n            </div>\n        );\n    }\n\n    return (\n        <div>\n            <h1>Upload files</h1>\n            <h4>Destination:</h4>\n            <p>{currentPath}</p>\n            <Button variant=\"contained\" color=\"primary\" onClick={openFileSelectionWindow}\n                    startIcon={<CloudUploadIcon/>}>\n                Select file(s)\n            </Button>\n            {selectedFiles.length > 0 ? showUploadSection() : null}\n            <input id=\"file-input\" type=\"file\" multiple=\"multiple\"\n                   name=\"fileUploadInput\"\n                   className=\"file-selection\"\n                   accept=\"image/*\"\n                   onChange={(e) => {\n                       setSelectedFiles(e.target.files);\n                   }}/>\n        </div>\n    );\n}\n\nexport default FileUpload;\n","import { React } from \"react\";\nimport rdfParser from \"rdf-parse\";\nimport { Store } from \"n3\";\n\nconst newEngine = require('@comunica/actor-init-sparql').newEngine;\nconst queryEngine = newEngine();\n\n/**\n * Takes a RDF query and a list of source urls, and executes the query on them\n * before returning bindings for the results.\n * The session object is needed to avoid errors with the header content type.\n * @param  {[type]} query   The query to execute\n * @param  {[type]} sources The source urls, pointing to turtle files\n * @param  {[type]} session A session object reference\n * @return {[type]}         The result bindings\n */\nasync function executeQuery (query, sources, session) {\n    const comunicaSources = [];\n\n    for (let sourceFile of sources) {\n        const store = new Store();\n        const response = await session.fetch(sourceFile, { method: 'get' });\n        const textStream = require('streamify-string')(await response.text());\n        const contentType = response.headers.get('Content-Type');\n        console.log(\"Content type:\", contentType);\n        // const strippedUrl = sourceFile.split(\"#\")[0];\n        await new Promise((resolve, reject) => {\n            rdfParser.parse(textStream, { contentType: contentType.split(';')[0], baseIRI: sourceFile })\n            .on('data', (quad) => { console.log('QUAD', quad, store); store.addQuad(quad) })\n            .on('error', (error) => reject(error))\n            .on('end', async () => {resolve()})\n        });\n        comunicaSources.push({ type: 'rdfjsSource', value: store });\n    }\n\n    const result = await queryEngine.query(query, {sources: comunicaSources});\n\n    // Consume results as an array (easier)\n    const bindings = await result.bindings();\n\n    // Log metadata containing source-level provenance information\n    const metadata = await result.metadata();\n    console.log(metadata)\n\n    return bindings;\n}\n\n\nexport  {executeQuery};","\nimport React, {useState, useEffect}from \"react\";\nimport {executeQuery} from \"./rdf\";\nimport {useSession} from \"@inrupt/solid-ui-react\";\nimport { VCARD, SCHEMA_INRUPT } from \"@inrupt/vocab-common-rdf\";\nimport { fetch } from \"@inrupt/solid-client-authn-browser\";\n// Import from \"@inrupt/solid-client\"\nimport {\n  getSolidDataset,\n  getThing,\n  getStringNoLocale,\n  getUrlAll\n} from \"@inrupt/solid-client\";\n\nconst getRoleQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/2006/vcard/ns#role> ?o }\";\nconst getPODProviderUrlQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/ns/solid/terms#oidcIssuer> ?o }\";\nconst getEmailCardUrlQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/2006/vcard/ns#hasEmail> ?o }\";\n// using email card url\nconst getEmailFromEmailCardUrlQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/2006/vcard/ns#value> ?o }\";\n\n/**\n * The Profile component displays the information about the current logged-in user.\n * The information includes the web id, the pod url, the role, the username and the email.\n * Other information might be considered in the future, like the POD provider or phone numbers\n * and the like.\n *\n * @component\n * @param {[type]} props The webid (string) and the pod url (string)\n */\nfunction Profile(props)\n{\n\tconst WEB_ID = props.webId;\n\tconst POD_URL = props.podUrl;\n\tlet [username, setUsername] = useState(\"\"); //data.public;\n\tlet [role, setRole] = useState(\"\");\n\tlet [email, setEmail] = useState(\"\");\n\n\tconst { session } = useSession();\n\n\tuseEffect(() => {\n\t\tgetProfileData();\n\t}, [POD_URL]);\n\n\t/**\n\t * Simple convenience function that parses a single result in the bindings of a query.\n\t * Ideally, this function should be replaced by functions from the inrupt client API (e.g. getThing).\n\t * @param  {[type]} bindings The results of the query, from which the result should be parsed\n\t * @return {[type]}          The parsed result\n\t */\n\tfunction parseSingleResult(bindings)\n\t{\n\t\treturn bindings[0]['_root'].entries[0][1]['id'].replace(/['\"]+/g, '');\n\t}\n\n\t/**\n\t * Fetch the data of the user using the web id. The function is currently a mixture\n\t * of inrupt API functions and custom queries for the email.\n\t */\n\tasync function getProfileData()\n\t{\n\t\tconst profileDocumentURI = WEB_ID.split('#')[0];\n\n\t\t// Use `getSolidDataset` to get the Profile document.\n\t\t// Profile document is public and can be read w/o authentication; i.e.: \n\t\t// - You can either omit `fetch` or \n\t\t// - You can pass in `fetch` with or without logging in first. \n\t\t//   If logged in, the `fetch` is authenticated.\n\t\t// For illustrative purposes, the `fetch` is passed in.\n\t\tconst myDataset = await getSolidDataset(profileDocumentURI, { fetch: session.fetch });\n\n\t\tconsole.log(\"dataset:\", myDataset);\n\t\t// Get the Profile data from the retrieved SolidDataset\n\t\tconst profile = getThing(myDataset, WEB_ID);\n\t\tconsole.log(\"profile:\", profile);\n\t\t// Get the formatted name using `VCARD.fn` convenience object.\n\t\t// `VCARD.fn` includes the identifier string \"http://www.w3.org/2006/vcard/ns#fn\".\n\t\t// As an alternative, you can pass in the \"http://www.w3.org/2006/vcard/ns#fn\" string instead of `VCARD.fn`.\n \n\t\tconst parsedUsername = getStringNoLocale(profile, VCARD.fn);\n\n\t\t// Get the role using `VCARD.role` convenience object.\n\t\t// `VCARD.role` includes the identifier string \"http://www.w3.org/2006/vcard/ns#role\"\n\t\t// As an alternative, you can pass in the \"http://www.w3.org/2006/vcard/ns#role\" string instead of `VCARD.role`.\n\n\t\tconst parsedRole = getStringNoLocale(profile, VCARD.role);\n\n\t\t// let parsedEmail = getUrlAll(profile, SCHEMA_INRUPT.email);\n\t\t// console.log(\"parsed email:\", parsedEmail);\n\t\tlet parsedEmail = null;\n\t\tlet resBindings = await executeQuery(getEmailCardUrlQuery, [WEB_ID], session);\n\t\tconsole.log(\"email card url res:\", resBindings);\n\t\tif (resBindings.length > 0)\n\t\t{\n\t\t\tlet parsedEmailCardUrl = parseSingleResult(resBindings);\n\t\t\tresBindings = await executeQuery(getEmailFromEmailCardUrlQuery, [parsedEmailCardUrl], session);\n\t\t\tconsole.log(\"email res:\", resBindings);\n\t\t\tif (resBindings.length > 0)\n\t\t\t{\n\t\t\t\tparsedEmail = parseSingleResult(resBindings);\n\t\t\t}\n\t\t}\n\t\tsetUsername(parsedUsername);\n\t\tsetRole(parsedRole);\n\t\tsetEmail(parsedEmail);\n\t\t// return {username: parsedUsername, role: parsedRole};\n\t}\n\n\n\t// async function getDetailsFromWebId()\n\t// {\n\t// \tlet resBindings = await executeQuery(getRoleQuery, [WEB_ID], session);\n\t// \tconsole.log(\"role res:\", resBindings);\n\t// \tif (resBindings.length > 0)\n\t// \t{\n\t// \t\tlet parsedRole = parseSingleResult(resBindings);\n\t// \t\tsetRole(parsedRole);\n\t// \t}\n\t// \tresBindings = await executeQuery(getEmailCardUrlQuery, [WEB_ID], session);\n\t// \tconsole.log(\"email card url res:\", resBindings);\n\t// \tif (resBindings.length > 0)\n\t// \t{\n\t// \t\tlet parsedEmailCardUrl = parseSingleResult(resBindings);\n\t// \t\tresBindings = await executeQuery(getEmailFromEmailCardUrlQuery, [parsedEmailCardUrl], session);\n\t// \t\tconsole.log(\"email res:\", resBindings);\n\t// \t\tif (resBindings.length > 0)\n\t// \t\t{\n\t// \t\t\tlet parsedEmail = parseSingleResult(resBindings);\n\t// \t\t\tsetEmail(parsedEmail);\n\t// \t\t}\n\t// \t}\n\t// }\n\n\t/**\n\t * This functions displays a <p> element containing the argument if defined,\n\t * otherwise returns a <p> element containing a dash character.\n\t * @param  {[type]} field A value to display\n\t * @return {[type]}       A <p> element containing either field or a dash\n\t */\n\tfunction showField(field)\n\t{\n\t\treturn (<p>{field ? field : \"-\"}</p>);\n\t}\n\n\n\treturn (\n\t\t<>\n\t\t\t<h1>Contact page of {username}</h1>\n\t\t\t<h4>WebId:</h4>\n\t\t\t{showField(WEB_ID)}\n\t\t\t<h4>POD url</h4>\n\t\t\t{showField(POD_URL)}\n\t\t\t<h4>Email:</h4>\n\t\t\t{showField(email)}\n\t\t\t<h4>Role</h4>\n\t\t\t{showField(role)}\n\t\t</>\n\t);\n}\n\nexport default Profile;","import {useState, React, useEffect} from \"react\";\nimport {executeQuery} from \"./rdf\";\nimport \"./Contacts.css\";\nimport {useSession} from \"@inrupt/solid-ui-react\";\nimport PersonIcon from '@material-ui/icons/Person';\n\nconst getContactsBasicInfoQuery = \"SELECT ?s ?o WHERE {?s <http://www.w3.org/2006/vcard/ns#fn> ?o}\";\n\n/**\n * The Contacts components gathers the contacts of the current user.\n * The contacts are fetched using a simple rdf query, storing the results in a state variable.\n *\n * @component\n * @param {[type]} props The webId (string), the gotoScreen function and the podUrl (string)\n */\nfunction Contacts(props) {\n    let webId = props.webId;\n    let gotoScreen = props.gotoScreen;\n    let podURL = props.podUrl;\n\n    const {session} = useSession();\n    const [bindings, setBindings] = useState([]);\n\n    /**\n     * Uses the pod url to fetch the people.ttl turtle file on the POD, subsequently being able\n     * to query the file for contact names and their associated 'person-files'.\n     * The result bindings are stored in a state variable. \n     */\n    async function fetchContacts() {\n        let getContactsBasicInfoSource = podURL + \"contacts/people.ttl#this\";\n        let resBindings = await executeQuery(getContactsBasicInfoQuery, [getContactsBasicInfoSource], session);\n        await setBindings(resBindings);\n    }\n\n    useEffect(() => {\n        fetchContacts();\n    }, [webId]);\n\n    /**\n     * The Contact component encapsulates the name of the user and it 'person-file' url,\n     * and allows the user to click on it to display more data about the contact.\n     * When clicked, a page switch is triggered by changing the path of the router\n     * and parameterize it with the name of the person.\n     * Notice that the person-file url is actually used to get the contact details, but is passed\n     * to the router in a hidden way to have a clearer url displayed in the browser and avoid unescaped\n     * character problems.\n     * @param {[type]} props The bindings of the result\n     * @return {[type]} A div component containing an icon (ideally a profile pic) and the name of the contact,\n     * which can be clicked on to move to the contact details page\n     */\n    function Contact(props) {\n        let binding = props.binding;\n\n        let username = binding['_root'].entries[1][1]['id'].replace(/['\"]+/g, '');\n        let turtleFileUrl = binding['_root'].entries[0][1]['id'].replace(/['\"]+/g, '');\n\n        return (\n            <div className=\"contact\">\n                <PersonIcon/>\n                <p className=\"contact-name\"\n                   onClick={() => gotoScreen(`/contacts/${username}`, [turtleFileUrl])}>{username}</p>\n            </div>\n        );\n    }\n\n    return (\n        <div>\n            <h1>Contacts</h1>\n            {bindings.map((binding, idx) => {\n                console.log(\"Binding:\", binding);\n                return (<Contact key={idx} binding={binding}/>)\n            })}\n        </div>\n    );\n}\n\nexport default Contacts;","\nimport React from \"react\";\n\n/**\n * The Albums component displays folder like structures that gather\n * images according to tags or location on the POD. Consequently, the implementation\n * of the component is heavily implementation dependent: files can be grouped\n * according to their parent folder on the POD, or according to index files\n * and dynamic faceted search algorithms. Currently, the Albums component is filled with dummy\n * data.\n *\n * @component\n * @param {[type]} props [description]\n */\nfunction Albums(props)\n{\n\treturn (\n\t\t<>\n\t\t\t<h1>Albums</h1>\n\t\t\t<h2>Your albums</h2>\n\t\t\t<p>album1</p>\n\t\t\t<p>album1</p>\n\t\t</>\n\t);\n}\n\nexport default Albums;","import React, {useState, useEffect} from \"react\";\nimport {executeQuery} from \"./rdf\";\nimport {getPODUrlFromWebId} from './pod';\nimport {useSession} from \"@inrupt/solid-ui-react\";\n\n// using person file as source\nconst getWebIdFromPersonFileQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/2006/vcard/ns#value> ?o }\";\n// using webid as source\nconst getRoleQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/2006/vcard/ns#role> ?o }\";\n// const getPODProviderUrlQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/ns/solid/terms#oidcIssuer> ?o }\";\nconst getEmailCardUrlQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/2006/vcard/ns#hasEmail> ?o }\";\n// using email card url\nconst getEmailFromEmailCardUrlQuery = \"SELECT ?o WHERE { ?s <http://www.w3.org/2006/vcard/ns#value> ?o }\";\n\n/**\n * The ContactDetails component gathers information about a given contact.\n * The data is fetched from the POD using a 'person-file' url received from the parent\n * Contacts component. Note that this file url is not received as a prop of the router which\n * has to pass by the url, but as a hidden state variable of the app.\n *\n * @component\n * @param {[type]} props [description]\n */\nfunction ContactDetails(props)\n{\n\tlet contactUsername = props.realProps.match.params.username; //data.public;\n\tlet contactPersonFileUrl = props.routingHiddenParams[0]; //data.hidden;\n\tlet [contactWebId,setContactWebId] = useState(\"\");\n\tlet [contactPodUrl, setContactPodUrl] = useState(\"\");\n\tlet [role, setRole] = useState(\"\");\n\tlet [email, setEmail] = useState(\"\");\n\n\tconst { session } = useSession();\n\n\t/**\n\t * Simple convenience function that parses a single result in the bindings of a query.\n\t * Ideally, this function should be replaced by functions from the inrupt client API (e.g. getThing).\n\t * @param  {[Object]} bindings The results of the query, from which the result should be parsed\n\t * @return {[string]}          The parsed result\n\t */\n\tfunction parseSingleResult(bindings)\n\t{\n\t\treturn bindings[0]['_root'].entries[0][1]['id'].replace(/['\"]+/g, '');\n\t}\n\n\t/**\n\t * This function use hardcoded predicates to query the person file and get information\n\t * like the role, email or webid of a contact. This function could be refactored\n\t * to use functions and vocabulary (e.g. VCARD) from the inrupt library.\n\t */\n\tasync function getContactDetailsFromPersonFile()\n\t{\n\t\tlet resBindings = await executeQuery(getWebIdFromPersonFileQuery, [contactPersonFileUrl], session);\n\t\tlet parsedWebId = parseSingleResult(resBindings);\n\t\t//console.log(\"parsed contact webid:\", parsedWebId);\n\t\tsetContactWebId(parsedWebId);\n\t\tlet newContactPodUrl =  getPODUrlFromWebId(parsedWebId);\n\t\tsetContactPodUrl(newContactPodUrl);\n\t\tresBindings = await executeQuery(getRoleQuery, [parsedWebId], session);\n\t\t//console.log(\"role res:\", resBindings);\n\t\tif (resBindings.length > 0)\n\t\t{\n\t\t\tlet parsedRole = parseSingleResult(resBindings);\n\t\t\tsetRole(parsedRole);\n\t\t}\n\t\tresBindings = await executeQuery(getEmailCardUrlQuery, [parsedWebId], session);\n\t\t//console.log(\"email card url res:\", resBindings);\n\t\tif (resBindings.length > 0)\n\t\t{\n\t\t\tlet parsedEmailCardUrl = parseSingleResult(resBindings);\n\t\t\tresBindings = await executeQuery(getEmailFromEmailCardUrlQuery, [parsedEmailCardUrl], session);\n\t\t\t//console.log(\"email res:\", resBindings);\n\t\t\tif (resBindings.length > 0)\n\t\t\t{\n\t\t\t\tlet parsedEmail = parseSingleResult(resBindings);\n\t\t\t\tsetEmail(parsedEmail);\n\t\t\t}\n\t\t}\n\t\t// let email =\n\t}\n\n\tuseEffect(() => {\n\t\tgetContactDetailsFromPersonFile();\n\t}, [contactPersonFileUrl]);\n\t\n\t/**\n\t * This functions displays a <p> element containing the argument if defined,\n\t * otherwise returns a <p> element containing a dash character.\n\t * @param  {[type]} field A value to display\n\t * @return {[type]}       A <p> element containing either field or a dash\n\t */\n\tfunction showField(field)\n\t{\n\t\treturn (<p>{field ? field : \"-\"}</p>);\n\t}\n\n\n\treturn (\n\t\t<>\n\t\t\t<h1>Contact page of {contactUsername}</h1>\n\t\t\t<h4>Person file url:</h4>\n\t\t\t{showField(contactPersonFileUrl)}\n\t\t\t<h4>WebId:</h4>\n\t\t\t{showField(contactWebId)}\n\t\t\t<h4>POD url</h4>\n\t\t\t{showField(contactPodUrl)}\n\t\t\t<h4>Email:</h4>\n\t\t\t{showField(email)}\n\t\t\t<h4>Role</h4>\n\t\t\t{showField(role)}\n\t\t</>\n\t);\n}\n\nexport default ContactDetails;","\nimport React, {useState} from \"react\";\nimport {BottomNavigation, BottomNavigationAction} from '@material-ui/core';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport GroupIcon from '@material-ui/icons/Group';\n\n\n/**\n * The BottomNavBar component extends a material-ui BottomNavigation component\n * to support routing in a fixed bar at the bottom of the screen.\n * This allows the app to navigate between pages while having a flexible\n * approach, especially for simple and intuitive mobile navigation.\n *\n * @component\n * @param {[type]} props [description]\n */\nfunction BottomNavBar(props) {\n    let classes = props.classes;\n    let btnClass = classes.bottomNavBtn;\n    let gotoScreen = props.gotoScreen;\n    let [location, setLocation] = useState(\"/\");\n\n    /**\n     * Event handler called each time that the bottom navigation is clicked and a page switch\n     * should take place. The gotoScreen function is then called and the the focus of the bottom\n     * navigation is updated.\n     * @param  {[type]} event    The change event for the bottom navigation element\n     * @param  {[string]} newValue The new string value of the bottom navigation, which is the new path for the router\n     */\n    const handleChange = async (event, newValue) => {\n        await setLocation(newValue);\n        await gotoScreen(newValue)\n    };\n\n    return (\n        <BottomNavigation className={classes.appBar} value={location} onChange={handleChange}\n                          showLabels style={{position: 'fixed', width: \"100%\", bottom: 0}}>\n            <BottomNavigationAction className={btnClass} value=\"/\" label=\"Photos\" icon={<PhotoIcon/>}/>\n            <BottomNavigationAction className={btnClass} value=\"/albums\" label=\"Albums\" icon={<FolderIcon/>}/>\n            <BottomNavigationAction className={btnClass} value=\"/profile\" label=\"Profile\" icon={<AccountBoxIcon/>}/>\n            <BottomNavigationAction className={btnClass} value=\"/contacts\" label=\"Contacts\" icon={<GroupIcon/>}/>\n        </BottomNavigation>\n    );\n}\n\nexport default BottomNavBar;","\nimport {GITHUB_PAGE_LINK} from \"./constants\";\n\nimport React from \"react\";\nimport {AppBar, Toolbar, Typography} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport IconButton from '@material-ui/core/IconButton';\nimport GitHubIcon from '@material-ui/icons/GitHub';\n\n\n/**\n * The MenuBar component represent a sticky bar at the top of the app, including\n * a label and ideally a logo in the future. The bar should also include quick access \n * functionnalities, which are currently limited to a button opening the file upload page.\n * @param {[type]} props [description]\n */\nfunction MenuBar(props) {\n    let classes = props.classes;\n    let gotoScreen = props.gotoScreen;\n\n    return (\n        <AppBar position=\"sticky\" className={classes.appBar}>\n            <Toolbar>\n                <Typography variant=\"h6\" color=\"inherit\">\n                    WePod\n                </Typography>\n                <GitHubIcon style={{cursor: \"pointer\"}} className={classes.topBarRightFirstElem} \n                onClick={event =>  window.open(GITHUB_PAGE_LINK, '_blank', \"\", false) }/>\n                <IconButton style={{color: \"white\", marginLeft: \"10px\"}} edge=\"start\"\n                            aria-label=\"menu\" onClick={async () => {\n                    await gotoScreen('/upload')\n                }}>\n                    <AddIcon/>\n                </IconButton>\n            </Toolbar>\n        </AppBar>\n    );\n}\n\nexport default MenuBar;","\nimport React from \"react\";\nimport Alert from '@material-ui/lab/Alert';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\n/**\n * The Notification component implements the UI and logic for notifications,\n * displaying the proper notification message prop depending on the notification type prop.\n * Note that the notification type should be a string accepted by the material-ui Alert component.\n *\n * @see {@link https://material-ui.com/components/alert/}\n * @param {[type]} props A valid Alert type (string), a notification message (string) and a setter function\n * for the message.\n */\nfunction Notification(props) {\n    let notifMsg = props.notifMsg;\n    let notifType = props.notifType;\n    let setNotifMsg = props.setNotifMsg;\n\n    return (<Collapse style={{overflowY: \"scroll\"}} in={(notifMsg !== \"\" && notifType !== \"\")}>\n        <Alert severity={notifType} action={\n            <IconButton\n                aria-label=\"close\"\n                color=\"inherit\"\n                size=\"small\"\n                onClick={() => {\n                    setNotifMsg(\"\");\n                }}>\n                <CloseIcon fontSize=\"inherit\"/>\n            </IconButton>}>\n            {notifMsg}\n        </Alert>\n    </Collapse>);\n}\n\nexport default Notification;","\nimport FileExplorer from \"./FileExplorer\";\nimport FileUpload from \"./FileUpload\";\nimport Profile from \"./Profile\";\nimport Contacts from \"./Contacts\";\nimport Albums from \"./Albums\";\nimport ContactDetails from \"./ContactDetails\";\nimport BottomNavBar from \"./BottomNavBar\";\nimport MenuBar from \"./MenuBar\";\nimport Notification from \"./Notification\";\n\nimport React, {useState} from \"react\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { Switch, Route } from \"react-router-dom\";\n\n\n/**\n * The Home component handles the application logic and UI once logged-in to access the POD. The component\n * relies on react router to switch between pages, with the root being the image gallery. The component\n * also contains menu bars to interact with the content, and can display notifications and loading animations.\n *\n * @component\n * @param {[type]} props [description]\n */\nfunction Home(props) {\n    /**\n     * State containing notification messages.\n     */\n    let [notifMsg, setNotifMsg] = useState(\"\");\n\n    /**\n     * State containing the notification type, which should be a string value accepted\n     * by the material UI Alert component (\"error\", \"info\", \"warning\", \"success\").\n     *\n     * @see {@link https://material-ui.com/components/alert/}\n     * \n     */\n    let [notifType, setNotifType] = useState(\"info\");\n\n    /**\n     * Boolean state telling whether or not a loading animation is to be displayed.\n     */\n    let [loadingAnim, setLoadingAnim] = useState(false);\n\n    /**\n     * State containing hidden routing parameters.\n     */\n    let [routingHiddenParams, setRoutingHiddenParams] = useState([]);\n\n    let webId = props.webId;\n    let podUrl = props.podUrl;\n    let explorerPath = props.explorerPath;\n    let setExplorerPath = props.setExplorerPath;\n    let history = props.history;\n\n    const classes = props.classes;\n\n   \n    /**\n     * This function changes the route that should be taken by the router by appending\n     * the new path to the browser history, and cancels any loading animation running.\n     * Hidden parameters can also be passed to the function\n     * without being exposed in the url (displayed in the browser). This is particularly useful\n     * when the data contains sepcial characters that could mess with the routing (e.g. ':', '#' or '/')\n     * or when the parameter is too long and makes it difficult to debug the routing by looking at the \n     * browser url. Notice that if hiddenParams is not empty, it means that the page we want to load\n     * expects these parameters to be set beforehand, hence we first set the hidden parameters\n     * before initiating the page switch. On the other hand, if the hiddenParams is null,\n     * then we first want to render the new page before assigning null to the routingHiddenParams state.\n     * This is because the previous page might have a prop that references the routingHiddenParam state,\n     * hence setting it to null while the component is still there would generate an error.\n     * @param  {[type]}  screenPath               The new path for the router, pushed to the history\n     * @param  {[type]}  hiddenParams             Params that will be used by the new page, but don't go in the path url\n     */\n    async function gotoScreen(screenPath, hiddenParams = null) {\n        // hiddenParams is defined and not null\n        // ==> update the state before moving to the new page\n        if (hiddenParams) {\n            await setRoutingHiddenParams(hiddenParams);\n        }\n\n        await setLoadingAnim(false); // always cancel loading anim when switching screen\n        history.push(`${screenPath}`);\n\n        // hiddenParams is null, so we set it after the page change\n        if (! hiddenParams) {\n            await setRoutingHiddenParams(null);\n        }\n    }\n\n    /**\n     * Displays a fixed loading animation centered on the screen when the loadingAnim state is set to true.\n     * The animation is top level, hence it has a z-index higher than the other components, and it floats\n     * as the user scrolls the page.\n     *\n     * @see {@link https://material-ui.com/api/circular-progress/}\n     * @return {[CircularProgress]}  A styled material-ui CircularProgress element\n     */\n    function showLoadingAnimation() {\n        if (loadingAnim) {\n            return <CircularProgress color=\"secondary\" size={100}\n                    style={{zIndex: 1700, opacity: \".7\", position: \"fixed\", top: \"45vh\"}}/>\n        }\n    }\n\n\n    return (<>\n        {showLoadingAnimation()}\n        <MenuBar classes={classes} history={history} gotoScreen={gotoScreen}/>\n        <Notification setNotifMsg={setNotifMsg} notifMsg={notifMsg} notifType={notifType}/>\n        <div className=\"content\">\n            <Switch>\n                <Route exact path=\"/upload\">\n                    <FileUpload explorerPath={explorerPath} setNotifMsg={setNotifMsg}\n                                setNotifType={setNotifType} setLoadingAnim={setLoadingAnim}/>\n                </Route>\n                <Route exact path=\"/profile\">\n                    <Profile webId={webId} podUrl={podUrl}/>\n                </Route>\n                <Route exact path=\"/contacts\">\n                    <Contacts gotoScreen={gotoScreen} podUrl={podUrl}/>\n                </Route>\n                <Route path=\"/contacts/:username\"\n                       render={(props) => <ContactDetails routingHiddenParams={routingHiddenParams} realProps={props}/>}/>\n                <Route exact path=\"/albums\">\n                    <Albums/>\n                </Route>\n                <Route exact path=\"/\">\n                    <FileExplorer podUrl={podUrl} explorerPath={explorerPath}\n                                  setExplorerPath={setExplorerPath} setLoadingAnim={setLoadingAnim}/>\n                </Route>\n            </Switch>\n        </div>\n        <BottomNavBar classes={classes} gotoScreen={gotoScreen}/>\n    </>);\n}\n\nexport default Home;","\n\nimport './App.css';\nimport Login from \"./Login\";\nimport Home from \"./Home\";\n\nimport React, {useState, useEffect} from \"react\";\nimport {useHistory} from \"react-router-dom\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\n\n// Style I want for fab, can add more - it's just a JS object\nconst useStyles = makeStyles({\n    fab: {\n        position: \"fixed\",\n        right: \"10px\",\n        bottom: \"10px\",\n    },\n    topBarRightFirstElem: {\n        marginLeft: 'auto',\n    },\n    appBar: {\n        background: 'rgba(0,0,0,0.9)',\n    },\n    bottomNavBtn: {\n        color: \"grey\",\n        \"&$selected\": {\n            color: \"red\"\n        }\n    }\n});\n\n\n/**\n * The App component displays a Login page from which the user can login to a POD.\n * One logged-in, the App will display the home screen instead.\n *\n * @component\n */\nfunction App() {\n    /**\n     * State telling if the user is logged in or not.\n     */\n    let [loggedIn, setLoggedIn] = useState(false);\n\n    /**\n     * The web id of the user.\n     */\n    let [webId, setWebId] = useState(\"\");\n\n    /**\n     * The url of the user's POD.\n     */\n    let [podUrl, setPodUrl] = useState(\"\");\n\n    /**\n     * Current path in the file explorer, which can be used when sub-folders\n     * can be navigated.\n     */\n    let [explorerPath, setExplorerPath] = useState(\"\");\n\n    let history = useHistory();\n    const classes = useStyles();\n\n    useEffect(() => {\n        setExplorerPath(podUrl);\n    }, [podUrl]);\n\n    /**\n     * Returns true if the user is logged in and the web id is set.\n     * @return {Boolean} The login status\n     */\n    function isLoggedIn() {\n        return (webId !== \"\") && loggedIn;\n    }\n\n    /**\n     * Convenience function that creates the login component.\n     * @return {[type]} The login component\n     */\n    function getLoginComponent() {\n        return (<>\n                <Login setWebId={setWebId} setLoggedIn={setLoggedIn} setPodUrl={setPodUrl}/>\n                </>);\n    }\n\n    /**\n     * Convenience function that creates the home component.\n     * @return {[type]} [description]\n     */\n    function getHomeComponent() {\n        return <Home classes={classes}\n                     webId={webId} podUrl={podUrl}\n                     history={history}\n                     explorerPath={explorerPath}\n                     setExplorerPath={setExplorerPath}/>;\n    }\n\n\n    return (\n        <div className=\"app-div\">\n            {isLoggedIn() ? getHomeComponent() : getLoginComponent()}\n        </div>\n    );\n}\n\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport {HashRouter} from \"react-router-dom\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <HashRouter>\n            <App/>\n        </HashRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}