(this.webpackJsonpreclaim_your_data=this.webpackJsonpreclaim_your_data||[]).push([[0],{124:function(e,t,n){},137:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(69),s=n.n(a),i=(n(80),n(5)),l=(n(81),n(0)),o=n.n(l),u=n(2),j=(n(83),n(21)),h=n(3);var b=function(e){var t=e.setLoggedIn,n=e.setWebId,c=null;function r(){return(r=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.handleIncomingRedirect)();case 2:(c=Object(j.getDefaultSession)()).info.isLoggedIn&&(t(!0),n(c.info.webId));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),Object(h.jsx)("div",{className:"login-frame",children:Object(h.jsx)("button",{className:"login-btn",onClick:function(){return Object(j.login)({oidcIssuer:"https://broker.pod.inrupt.com",redirectUrl:window.location.href,clientName:"Getting started app"})},children:"Log-in"})})},d=n(20),f=n(28),p=n(141),O=n(142),x=n(144);n(124);var g=function(e){e.files;var t=e.openLink,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1];function l(e){return e.endsWith("/")}function b(e){return e.endsWith(".jpg")||e.endsWith(".jpeg")||e.endsWith(".png")}function g(e){var t=e.match(/^https:\/\/pod\.inrupt\.com(\/\w+)*\/(\w+)/);return console.log(t),t[t.length-1]}function m(){return(m=Object(u.a)(o.a.mark((function e(t){var n,c,r,a,i,u,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Fetching"),console.log(t),n=[],c=Object(d.a)(t),e.prev=4,c.s();case 6:if((r=c.n()).done){e.next=19;break}if(a=r.value,console.log(a),i={url:a.url,shortName:g(a.url),isFolderBoolean:l(a.url),imageUrl:null},n.push(i),!b(i.url)){e.next=17;break}return e.next=14,Object(f.a)(i.url,{fetch:j.fetch});case 14:u=e.sent,h=URL.createObjectURL(u),i.imageUrl=h;case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:s(n);case 28:case"end":return e.stop()}}),e,null,[[4,21,24,27]])})))).apply(this,arguments)}function v(e){return console.log("imageUrl: "+e.imageUrl),e.isFolderBoolean||!b(e.url)?Object(h.jsx)("p",{onClick:function(){return t(e.url)},children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-folder",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{d:"M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"})})}):e.imageUrl?Object(h.jsx)(p.a,{variant:"top",src:e.imageUrl,rounded:!0}):Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-card-image",viewBox:"0 0 16 16",children:[Object(h.jsx)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}),Object(h.jsx)("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"})]})}return Object(c.useEffect)((function(){!function(e){m.apply(this,arguments)}(e.files)}),[e.files]),Object(h.jsx)(O.a,{xs:3,className:"g-4",children:a.map((function(e,n){return Object(h.jsxs)(x.a,{children:[v(e),Object(h.jsx)(x.a.Body,{children:Object(h.jsx)(x.a.Title,{children:Object(h.jsx)("p",{onClick:function(){return t(e.url)},children:e.shortName})})})]})}))})},m=n(143),v=(n(137),/https:\/\/(\w+\.)solidweb.org\/|https:\/\/pod\.inrupt\.com\/\w+\//);function w(e){return e.match(v)[0]}var k=function(e){var t=w(e.webId),n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)(!1),b=Object(i.a)(l,2),d=(b[0],b[1]),p=e.explorerPath,x=e.setExplorerPath;function v(e){d(!0),k(e).then((function(t){x(e),s(t),d(!1)}))}function k(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(o.a.mark((function e(t){var n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(t,{fetch:j.fetch});case 2:return n=e.sent,e.next=5,Object(f.c)(n);case 5:return c=e.sent,r=[],c.length>1&&(r=c.slice(1,c.length)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return""===p&&x(t),0===a.length&&p===t&&k(t).then((function(e){x(t),s(e)})),Object(h.jsxs)(m.a,{children:[Object(h.jsx)(O.a,{children:Object(h.jsxs)("div",{id:"file-explorer",children:[Object(h.jsx)("button",{className:"Button",id:"go-back",onClick:function(){if(p.length>t.length&&p!==t){var e=p.slice(0,-1).lastIndexOf("/");v(p.slice(0,e+1))}else alert("Cannot go back from POD root.")},children:"Go back"}),Object(h.jsxs)("p",{children:["Files for current path (",p,"):"]})]})}),Object(h.jsx)(g,{files:a,openLink:function(e){k(e).then((function(t){x(e),s(t)}))}})]})};var y=function(e){var t=e.explorerPath,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1];function l(e,t){return b.apply(this,arguments)}function b(){return(b=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.d)(n,t,{slug:t.name,contentType:t.type,fetch:j.fetch});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),alert("file '"+t.name+"' already exists.");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function p(){var e,t=[],n=Object(d.a)(a);try{for(n.s();!(e=n.n()).done;){var c=e.value;t.push(Object(h.jsx)("li",{children:c.name}))}}catch(r){n.e(r)}finally{n.f()}return t}return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{children:["Upload files to ",t]}),Object(h.jsx)("button",{className:"Button",onClick:function(){document.querySelector("#file-input").click()},children:"Add file(s)"}),Object(h.jsxs)("div",{className:"SelectedFilesDiv",children:[Object(h.jsx)("p",{children:"Selected files:"}),Object(h.jsx)("ul",{children:p()})]}),Object(h.jsx)("button",{className:"Button",onClick:function(){var e,n=Object(d.a)(a);try{for(n.s();!(e=n.n()).done;){l(e.value,t)}}catch(c){n.e(c)}finally{n.f()}},children:"Upload"}),Object(h.jsx)("input",{id:"file-input",type:"file",multiple:"multiple",name:"fileUploadInput",className:"file-selection",onChange:function(e){s(e.target.files)}})]})},C=n(9);function I(e){var t=e.webId,n=Object(C.h)();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"You are logged in !!!"}),Object(h.jsxs)("h3",{children:["webID: ",t]}),Object(h.jsx)("button",{className:"Button",onClick:function(){console.log("goto file upload screen ..."),e.history.replace("".concat(n.url,"/upload"))},children:"Upload files"}),Object(h.jsx)(k,{webId:t,explorerPath:e.explorerPath,setExplorerPath:e.setExplorerPath})]})}var B=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),l=s[0],o=s[1],u=Object(c.useState)(""),j=Object(i.a)(u,2),d=j[0],f=j[1],p=Object(C.g)();function O(){return""!==l&&n}return Object(h.jsx)(C.c,{history:p,children:Object(h.jsx)("div",{className:"app-div",children:Object(h.jsxs)(C.d,{children:[Object(h.jsxs)(C.b,{path:"/login",children:[Object(h.jsx)(b,{setWebId:o,setLoggedIn:r}),O()?Object(h.jsx)(C.a,{to:"/"}):null]}),Object(h.jsx)(C.b,{path:"/home/upload",children:O()?Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{className:"Button",onClick:function(){return p.goBack()},children:"Go back"}),Object(h.jsx)(y,{explorerPath:d})]}):Object(h.jsx)(C.a,{to:"/"})}),Object(h.jsxs)(C.b,{path:"/home",children:[Object(h.jsx)("button",{className:"Button",onClick:function(){return p.goBack()},children:"Go back"}),O()?Object(h.jsx)(I,{webId:l,history:p,explorerPath:d,setExplorerPath:f}):Object(h.jsx)(C.a,{to:"/"})]}),Object(h.jsx)(C.b,{path:"/",children:O()?Object(h.jsx)(C.a,{push:!0,to:"/home"}):Object(h.jsx)(C.a,{push:!0,to:"/login"})})]})})})},N=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,170)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},P=n(47);s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(P.a,{children:Object(h.jsx)(B,{})})}),document.getElementById("root")),N()},80:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){}},[[140,1,2]]]);
//# sourceMappingURL=main.9cf16af6.chunk.js.map